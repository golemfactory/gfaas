<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `gfaas` crate."><meta name="keywords" content="rust, rustlang, rust-lang, gfaas"><title>gfaas - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script src="../storage.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="shortcut icon" href="../favicon.ico"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../gfaas/index.html'><div class='logo-container rust-logo'><img src='../rust-logo.png' alt='logo'></div></a><p class='location'>Crate gfaas</p><div class='block version'><p>Version 0.3.0</p></div><div class="sidebar-elems"><a id='all-types' href='all.html'><p>See all gfaas's items</p></a><div class="block items"><ul><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li></ul></div><p class='location'></p><script>window.sidebarCurrent = {name: 'gfaas', ty: 'mod', relpath: '../'};</script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><span class="help-button">?</span>
                <a id="settings-menu" href="../settings.html"><img src="../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../src/gfaas/lib.rs.html#1-262' title='goto source code'>[src]</a></span><span class='in-band'>Crate <a class="mod" href=''>gfaas</a></span></h1><div class='docblock'><p>This crate allows you to distributed heavy-workload functions to the Golem Network (or any
other compatible backend when support for it is added in the future).</p>
<h2 id="quick-start" class="section-header"><a href="#quick-start">Quick start</a></h2>
<p>The usage is pretty straightforward. In your <code>Cargo.toml</code>, put <code>gfaas</code> as your dependency</p>
<pre><code class="language-toml"># Cargo.toml
[dependencies]
gfaas = &quot;0.3&quot;
</code></pre>
<p>You can now annotate some heavy-workload function to be distributed on the Golem Network
like so</p>

<div class='information'><div class='tooltip ignore'>ⓘ<span class='tooltiptext'>This example is not tested</span></div></div><div class="example-wrap"><pre class="rust rust-example-rendered ignore">
<span class="kw">use</span> <span class="ident">gfaas</span>::<span class="ident">remote_fn</span>;

<span class="attribute">#[<span class="ident">remote_fn</span>]</span>
<span class="kw">fn</span> <span class="ident">hello</span>(<span class="ident">input</span>: <span class="ident">String</span>) <span class="op">-&gt;</span> <span class="ident">String</span> {
    <span class="comment">// let&#39;s make the input all-caps</span>
    <span class="ident">input</span>.<span class="ident">to_uppercase</span>().<span class="ident">to_string</span>()
}

<span class="attribute">#[<span class="ident">actix_rt</span>::<span class="ident">main</span>]</span>
<span class="kw">async</span> <span class="kw">fn</span> <span class="ident">main</span>() {
    <span class="kw">let</span> <span class="ident">input</span> <span class="op">=</span> <span class="string">&quot;hey there gfaas&quot;</span>;
    <span class="kw">let</span> <span class="ident">output</span> <span class="op">=</span> <span class="ident">hello</span>(<span class="string">&quot;hey there gfaas&quot;</span>.<span class="ident">to_string</span>()).<span class="kw">await</span>.<span class="ident">unwrap</span>();
    <span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">input</span>.<span class="ident">to_uppercase</span>(), <span class="ident">output</span>)
}</pre></div>
<p>In order to compile your code you'll need to use our custom wrapper on top of <code>cargo</code> called
<code>gfaas</code>. You can install the tool with <code>cargo-install</code> like so</p>
<pre><code class="language-sh">cargo install gfaas-cli
</code></pre>
<p>Then, you can use <code>gfaas</code> like you would use <code>cargo</code>. So, to build and run on Golem Network,
you'd execute</p>
<pre><code class="language-sh">gfaas run
</code></pre>
<h2 id="notes-about-gfaasremote_fn" class="section-header"><a href="#notes-about-gfaasremote_fn">Notes about <code>gfaas::remote_fn</code></a></h2>
<p>When you annotate a function with <code>gfaas::remote_fn</code> attribute, it gets expanded into a
full-fledged async function which is fallible. So for instance, the following function</p>

<div class='information'><div class='tooltip ignore'>ⓘ<span class='tooltiptext'>This example is not tested</span></div></div><div class="example-wrap"><pre class="rust rust-example-rendered ignore">
<span class="kw">use</span> <span class="ident">gfaas</span>::<span class="ident">remote_fn</span>;

<span class="attribute">#[<span class="ident">remote_fn</span>]</span>
<span class="kw">fn</span> <span class="ident">hello</span>(<span class="ident">input</span>: <span class="ident">String</span>) <span class="op">-&gt;</span> <span class="ident">String</span>;</pre></div>
<p>expands into</p>

<div class='information'><div class='tooltip ignore'>ⓘ<span class='tooltiptext'>This example is not tested</span></div></div><div class="example-wrap"><pre class="rust rust-example-rendered ignore">
<span class="kw">async</span> <span class="kw">fn</span> <span class="ident">hello</span>(<span class="ident">input</span>: <span class="ident">String</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">String</span>, <span class="ident">gfaas</span>::<span class="ident">Error</span><span class="op">&gt;</span>;</pre></div>
<p>Therefore, it is important to remember that you need to run the function in an async block
and in order to get the result of your function back, you need to unpack it from the outer
<code>Result</code> type.</p>
<p>The asyncness and the <code>Result</code> are there due to the nature of any distributed computation
run on top of some network of nodes: it may fail due to reasons not related to your app
such as network downtime, etc.</p>
<p>Furthermore, the input and output arguments of your function have to be serializable, and
so they are expected to derive <code>serde::Serialize</code> and <code>serde::Deserialize</code> traits.</p>
<h3 id="specifying-golems-configuration-parameters" class="section-header"><a href="#specifying-golems-configuration-parameters">Specifying Golem's configuration parameters</a></h3>
<p>You can currently set the following configuration parameters directly via <code>gfaas::remote_fn</code>
attribute:</p>
<ul>
<li>(maximum) budget in NGNT (defaults to 100):</li>
</ul>

<div class='information'><div class='tooltip ignore'>ⓘ<span class='tooltiptext'>This example is not tested</span></div></div><div class="example-wrap"><pre class="rust rust-example-rendered ignore">
<span class="attribute">#[<span class="ident">remote_fn</span>(<span class="ident">budget</span> <span class="op">=</span> <span class="number">100</span>)]</span>
<span class="kw">fn</span> <span class="ident">hello</span>(<span class="ident">input</span>: <span class="ident">String</span>) <span class="op">-&gt;</span> <span class="ident">String</span>;</pre></div>
<ul>
<li>timeout in seconds (defaults to 10 minutes):</li>
</ul>

<div class='information'><div class='tooltip ignore'>ⓘ<span class='tooltiptext'>This example is not tested</span></div></div><div class="example-wrap"><pre class="rust rust-example-rendered ignore">
<span class="attribute">#[<span class="ident">remote_fn</span>(<span class="ident">timeout</span> <span class="op">=</span> <span class="number">600</span>)]</span>
<span class="kw">fn</span> <span class="ident">hello</span>(<span class="ident">input</span>: <span class="ident">String</span>) <span class="op">-&gt;</span> <span class="ident">String</span>;</pre></div>
<ul>
<li>subnet tag (defaults to &quot;devnet-alpha.2&quot;):</li>
</ul>

<div class='information'><div class='tooltip ignore'>ⓘ<span class='tooltiptext'>This example is not tested</span></div></div><div class="example-wrap"><pre class="rust rust-example-rendered ignore">
<span class="attribute">#[<span class="ident">remote_fn</span>(<span class="ident">subnet</span> <span class="op">=</span> <span class="string">&quot;devnet-alpha.2&quot;</span>)]</span>
<span class="kw">fn</span> <span class="ident">hello</span>(<span class="ident">input</span>: <span class="ident">String</span>) <span class="op">-&gt;</span> <span class="ident">String</span>;</pre></div>
<p>Of course, nobody stops you from setting any number of parameters at once</p>

<div class='information'><div class='tooltip ignore'>ⓘ<span class='tooltiptext'>This example is not tested</span></div></div><div class="example-wrap"><pre class="rust rust-example-rendered ignore">
<span class="attribute">#[<span class="ident">remote_fn</span>(<span class="ident">budget</span> <span class="op">=</span> <span class="number">10</span>, <span class="ident">subnet</span> <span class="op">=</span> <span class="string">&quot;my_subnet&quot;</span>)]</span>
<span class="kw">fn</span> <span class="ident">hello</span>(<span class="ident">input</span>: <span class="ident">String</span>) <span class="op">-&gt;</span> <span class="ident">String</span>;</pre></div>
<h2 id="notes-about-gfaas-build-tool-and-adding-dependecies-for-your-functions" class="section-header"><a href="#notes-about-gfaas-build-tool-and-adding-dependecies-for-your-functions">Notes about <code>gfaas</code> build tool and adding dependecies for your functions</a></h2>
<p>The reason that a custom wrapper around <code>cargo</code> is needed, is because the function
annotated with <code>gfaas::remote_fn</code>, under-the-hood is actually automatically cross-compiled
into a WASI binary.</p>
<p>In addition, since the functions are cross-compiled to WASI, you need to install
<code>wasm32-wasi</code> target in your used Rust toolchain. Furthermore, for that same reason, not
all crates are compatible with WASI yet, but you can manually specify which crates you
want your functions to depend on by adding a <code>[gfaas_dependencies]</code> section to your <code>Cargo.toml</code></p>
<pre><code class="language-toml"># Cargo.toml
[package]
author = &quot;Jakub Konka&quot;

[dependecies]
actix = &quot;1&quot;

[gfaas_dependencies]
log = &quot;0.4&quot;
</code></pre>
<h2 id="notes-on-running-your-app-locally-for-testing" class="section-header"><a href="#notes-on-running-your-app-locally-for-testing">Notes on running your app locally (for testing)</a></h2>
<p>It is well known that prior to launching our app on some distributed network of nodes, it
is convenient to first test the app locally in search of bugs and errors. This is also
possible with <code>gfaas</code>. In order to force your app to run locally, simply pass
<code>run_local=true</code> as argument to <code>gfaas::remote_fn</code> attribute</p>

<div class='information'><div class='tooltip ignore'>ⓘ<span class='tooltiptext'>This example is not tested</span></div></div><div class="example-wrap"><pre class="rust rust-example-rendered ignore">
<span class="attribute">#[<span class="ident">remote_fn</span>(<span class="ident">run_local</span> <span class="op">=</span> <span class="bool-val">true</span>)]</span>
<span class="kw">fn</span> <span class="ident">hello</span>(<span class="ident">input</span>: <span class="ident">String</span>) <span class="op">-&gt;</span> <span class="ident">String</span>;</pre></div>
<p>This will spawn all of your annotated functions in separate threads on your machine locally,
so you can verify that everything works as expected prior to launching the tasks on the
Golem Network.</p>
<h2 id="examples" class="section-header"><a href="#examples">Examples</a></h2>
<p>A couple illustrative examples of how to use this crate can be found in the <code>examples/</code>
directory. All examples require <code>gfaas</code> build tool to be built.</p>
</div><h2 id='modules' class='section-header'><a href="#modules">Modules</a></h2>
<table><tr class='module-item'><td><a class="mod" href="__private/index.html" title='gfaas::__private mod'>__private</a></td><td class='docblock-short'><p>This is a private module. The stability of this API is not guaranteed and may change
without notice in the future.</p>
</td></tr></table><h2 id='structs' class='section-header'><a href="#structs">Structs</a></h2>
<table><tr class='module-item'><td><a class="struct" href="struct.Error.html" title='gfaas::Error struct'>Error</a></td><td class='docblock-short'><p>Re-export of <code>anyhow::Error</code> which is the default type returned by the expanded
<code>gfaas::remote_fn</code>-annotated function.
The <code>Error</code> type, a wrapper around a dynamic error type.</p>
</td></tr></table><h2 id='attributes' class='section-header'><a href="#attributes">Attribute Macros</a></h2>
<table><tr class='module-item'><td><a class="attr" href="attr.remote_fn.html" title='gfaas::remote_fn attr'>remote_fn</a></td><td class='docblock-short'><p>The bread and butter of this crate.</p>
</td></tr></table></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../";window.currentCrate = "gfaas";</script><script src="../main.js"></script><script defer src="../search-index.js"></script></body></html>